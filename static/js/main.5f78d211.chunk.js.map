{"version":3,"sources":["pages/Overview.mdx","components/component-types.tsx","pages/Components.mdx","pages/ClassComponent.mdx","pages/PureComponent.mdx","pages/FunctionComponent.mdx","pages/Hooks.mdx","pages/Functions.mdx","components/RenderCounter.tsx","hooks/useForceUpdate.ts","examples/ContextMemoized.tsx","examples/ContextSeparate.tsx","examples/ContextSelector.tsx","examples/ContextUnmemoized.tsx","pages/Context.mdx","pages/Immutability.mdx","app.tsx","components/mdx/index.ts","components/mdx/Code.tsx","serviceWorker.ts","index.tsx"],"names":["layoutProps","MDXLayout","MDXContent","components","props","mdxType","isMDXComponent","Container","intervalFunctionId","changeState","setState","prevState","counter","date","Date","state","this","setInterval","clearInterval","toLocaleString","shouldUpdate","Component","ChildComponent","suffix","ChildPureComponent","PureComponent","ChildFuncComponent","ComponentTypes","RenderCounter","React","memo","useRef","current","style","borderStyle","borderWidth","borderColor","color","position","right","top","background","fontFamily","padding","children","useForceUpdate","useState","setIt","Context","createContext","value","Provider","useMemo","width","JSON","stringify","Consumer","useContext","update","onClick","FooContext","BarContext","foo","bar","ConsumerFoo","ConsumerBar","count","setCount","useContextSelector","v","parentName","ContextUnmemoized","ContextMemoized","ContextSeparate","ContextSelector","App","className","to","Suspense","fallback","path","component","Components","ClassComponent","FunctionComponent","Hooks","Functions","Immutability","exact","Overview","code","language","replace","defaultProps","theme","undefined","tokens","getLineProps","getTokenProps","map","line","i","key","token","Boolean","window","location","hostname","match","Typography","githubTheme","injectStyles","ReactDOM","render","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.5f78d211.chunk.js","sourcesContent":["\nimport React from 'react'\nimport { mdx } from '@mdx-js/react'\n\n/* @jsx mdx */\n\n\nconst makeShortcode = name => function MDXDefaultShortcode(props) {\n  console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\")\n  return <div {...props}/>\n};\n\nconst layoutProps = {\n  \n};\nconst MDXLayout = \"wrapper\"\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n    <h2>{`Overview`}</h2>\n    <p>{`The project is created to experiment with different approaches to use\nReact and create a list of do's, dont's, problematic approaches and best\npractice in terms of performance, readability, extensibility and\nmaintainability.`}</p>\n    </MDXLayout>;\n}\n\n;\nMDXContent.isMDXComponent = true;","import React, { Component, PureComponent } from 'react';\n\nconst ComponentTypes: React.FC = () => {\n  return (\n    <div>\n      <h2>Component/PureComponent/FunctionComponent re-rendering</h2>\n      <Container />\n    </div>\n  );\n};\n\nclass Container extends Component<{}, TContainerState> {\n  private intervalFunctionId?: NodeJS.Timeout;\n\n  constructor(props: {}) {\n    super(props);\n\n    this.state = {\n      counter: 0,\n      date: new Date()\n    };\n  }\n\n  componentDidMount() {\n    this.intervalFunctionId = setInterval(this.changeState, 2000);\n  }\n\n  componentWillUnmount() {\n    clearInterval(this.intervalFunctionId!);\n  }\n\n  changeState = () =>\n    this.setState(prevState => ({\n      counter: prevState.counter + 1,\n      date: new Date()\n    }));\n\n  render() {\n    return (\n      <div>\n        <fieldset>\n          <legend>Container</legend>\n          <p>Container last re-rendered: {this.state.date.toLocaleString()}</p>\n          <fieldset>\n            <legend>Children</legend>\n            <fieldset>\n              <legend>Component</legend>\n              <ChildComponent counter={0} shouldUpdate={false} />\n              <ChildComponent\n                counter={this.state.counter}\n                shouldUpdate={true}\n              />\n            </fieldset>\n            <fieldset>\n              <legend>PureComponent</legend>\n              <ChildPureComponent counter={0} shouldUpdate={false} />\n              <ChildPureComponent\n                counter={this.state.counter}\n                shouldUpdate={true}\n              />\n            </fieldset>\n            <fieldset>\n              <legend>FunctionComponent</legend>\n              <ChildFuncComponent counter={0} shouldUpdate={false} />\n              <ChildFuncComponent\n                counter={this.state.counter}\n                shouldUpdate={true}\n              />\n            </fieldset>\n          </fieldset>\n        </fieldset>\n      </div>\n    );\n  }\n}\n\nclass ChildComponent extends Component<TChildProps> {\n  render() {\n    const suffix = this.props.shouldUpdate ? '' : \"n't\";\n\n    return (\n      <div>\n        <p>\n          This component <strong>should{suffix}</strong> re-render\n        </p>\n        <p>Counter: {this.props.counter}</p>\n        <p>Last rendered at: {new Date().toLocaleString()}</p>\n        <hr />\n      </div>\n    );\n  }\n}\n\nclass ChildPureComponent extends PureComponent<TChildProps> {\n  render() {\n    const suffix = this.props.shouldUpdate ? '' : \"n't\";\n\n    return (\n      <div>\n        <p>\n          This component <strong>should{suffix}</strong> re-render\n        </p>\n        <p>Counter: {this.props.counter}</p>\n        <p>Last rendered at: {new Date().toLocaleString()}</p>\n        <hr />\n      </div>\n    );\n  }\n}\n\nconst ChildFuncComponent: React.FC<TChildProps> = (props: TChildProps) => {\n  const suffix = props.shouldUpdate ? '' : \"n't\";\n\n  return (\n    <div>\n      <p>\n        This component <strong>should{suffix}</strong> re-render\n      </p>\n      <p>Counter: {props.counter}</p>\n      <p>Last rendered at: {new Date().toLocaleString()}</p>\n      <hr />\n    </div>\n  );\n};\n\ntype TChildProps = {\n  counter: number;\n  shouldUpdate: boolean;\n};\n\ntype TContainerState = {\n  date: Date;\n  counter: number;\n};\n\nexport default ComponentTypes;\n","\nimport React from 'react'\nimport { mdx } from '@mdx-js/react'\n\n/* @jsx mdx */\nimport ComponentTypes from '../components/component-types';\n\nconst makeShortcode = name => function MDXDefaultShortcode(props) {\n  console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\")\n  return <div {...props}/>\n};\n\nconst layoutProps = {\n  \n};\nconst MDXLayout = \"wrapper\"\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n\n    <h2>{`Components`}</h2>\n    <p>{`TODO: remove this`}</p>\n    <ComponentTypes mdxType=\"ComponentTypes\" />\n    </MDXLayout>;\n}\n\n;\nMDXContent.isMDXComponent = true;","\nimport React from 'react'\nimport { mdx } from '@mdx-js/react'\n\n/* @jsx mdx */\n\n\nconst makeShortcode = name => function MDXDefaultShortcode(props) {\n  console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\")\n  return <div {...props}/>\n};\n\nconst layoutProps = {\n  \n};\nconst MDXLayout = \"wrapper\"\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n    <h2>{`Class Component`}</h2>\n    </MDXLayout>;\n}\n\n;\nMDXContent.isMDXComponent = true;","\nimport React from 'react'\nimport { mdx } from '@mdx-js/react'\n\n/* @jsx mdx */\n\n\nconst makeShortcode = name => function MDXDefaultShortcode(props) {\n  console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\")\n  return <div {...props}/>\n};\n\nconst layoutProps = {\n  \n};\nconst MDXLayout = \"wrapper\"\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n    <h2>{`Pure Component`}</h2>\n    </MDXLayout>;\n}\n\n;\nMDXContent.isMDXComponent = true;","\nimport React from 'react'\nimport { mdx } from '@mdx-js/react'\n\n/* @jsx mdx */\n\n\nconst makeShortcode = name => function MDXDefaultShortcode(props) {\n  console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\")\n  return <div {...props}/>\n};\n\nconst layoutProps = {\n  \n};\nconst MDXLayout = \"wrapper\"\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n    <h2>{`Function Component`}</h2>\n    </MDXLayout>;\n}\n\n;\nMDXContent.isMDXComponent = true;","\nimport React from 'react'\nimport { mdx } from '@mdx-js/react'\n\n/* @jsx mdx */\n\n\nconst makeShortcode = name => function MDXDefaultShortcode(props) {\n  console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\")\n  return <div {...props}/>\n};\n\nconst layoutProps = {\n  \n};\nconst MDXLayout = \"wrapper\"\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n    <h2>{`Hooks`}</h2>\n    </MDXLayout>;\n}\n\n;\nMDXContent.isMDXComponent = true;","\nimport React from 'react'\nimport { mdx } from '@mdx-js/react'\n\n/* @jsx mdx */\n\n\nconst makeShortcode = name => function MDXDefaultShortcode(props) {\n  console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\")\n  return <div {...props}/>\n};\n\nconst layoutProps = {\n  \n};\nconst MDXLayout = \"wrapper\"\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n    <h2>{`Functions`}</h2>\n    </MDXLayout>;\n}\n\n;\nMDXContent.isMDXComponent = true;","import React from 'react';\n\ntype RenderCounterProps = {\n  children: React.ReactNode;\n  color: string;\n  style?: React.CSSProperties;\n};\n\nconst RenderCounter = React.memo<RenderCounterProps>(props => {\n  const counter = React.useRef<number>(0);\n  counter.current += 1;\n\n  return (\n    <div\n      style={{\n        ...props.style,\n        borderStyle: 'solid',\n        borderWidth: 3,\n        borderColor: props.color,\n        position: 'relative'\n      }}\n    >\n      <div\n        style={{\n          position: 'absolute',\n          right: 0,\n          top: 0,\n          background: 'black',\n          color: 'white',\n          fontFamily: 'monospace',\n          padding: 2\n        }}\n      >\n        Render count: {counter.current}\n      </div>\n      {props.children}\n    </div>\n  );\n});\n\nexport default RenderCounter;\n","import React from 'react';\n\nconst useForceUpdate = () => {\n  const [, setIt] = React.useState<any>();\n\n  return () => setIt({});\n};\n\nexport default useForceUpdate;\n","import React from 'react';\n\nimport RenderCounter from '../components/RenderCounter';\nimport useForceUpdate from '../hooks/useForceUpdate';\n\ntype ContextValue = { value: number };\nconst Context = React.createContext<ContextValue>({ value: 1 });\n\nconst Provider: React.FC = props => {\n  const value = React.useMemo(() => ({ value: 1 }), []);\n  return (\n    <RenderCounter color=\"blue\" style={{ width: '70%' }}>\n      <Context.Provider value={value}>\n        <div>\n          <code>Provider: {JSON.stringify(value, null, 2)}</code>\n        </div>\n        <div>{props.children}</div>\n      </Context.Provider>\n    </RenderCounter>\n  );\n};\n\nconst Consumer: React.FC = React.memo(() => {\n  const value = React.useContext(Context);\n\n  return (\n    <RenderCounter color=\"green\" style={{ width: '70%' }}>\n      <code>Consumer: {JSON.stringify(value, null, 2)}</code>\n    </RenderCounter>\n  );\n});\n\nexport default () => {\n  const update = useForceUpdate();\n\n  return (\n    <>\n      <Provider>\n        <Consumer />\n      </Provider>\n\n      <hr style={{ background: 'transparent' }} />\n      <button onClick={update}>Render example</button>\n    </>\n  );\n};\n","import React from 'react';\nimport RenderCounter from '../components/RenderCounter';\n\ntype ContextValue = number;\n\nconst FooContext = React.createContext<ContextValue>(0);\nconst BarContext = React.createContext<ContextValue>(0);\n\nconst Provider: React.FC<{ foo: number, bar: number }> = props => {\n  const { foo, bar } = props;\n\n  return (\n    <RenderCounter color=\"blue\" style={{ width: '70%' }}>\n      <FooContext.Provider value={foo}>\n        <BarContext.Provider value={bar}>\n          <div>\n            <code>Provider: {JSON.stringify({ foo, bar }, null, 2)}</code>\n          </div>\n          <div>{props.children}</div>\n        </BarContext.Provider>\n      </FooContext.Provider>\n    </RenderCounter>\n  );\n};\n\nconst ConsumerFoo: React.FC = React.memo(() => {\n  const value = React.useContext(FooContext);\n\n  return (\n    <RenderCounter color=\"green\" style={{ width: '70%' }}>\n      <code>ConsumerFoo: {JSON.stringify(value, null, 2)}</code>\n    </RenderCounter>\n  );\n});\n\nconst ConsumerBar: React.FC = React.memo(() => {\n  const value = React.useContext(BarContext);\n\n  return (\n    <RenderCounter color=\"red\" style={{ width: '70%' }}>\n      <code>ConsumerBar: {JSON.stringify(value, null, 2)}</code>\n    </RenderCounter>\n  );\n});\n\nexport default () => {\n  const [count, setCount] = React.useState(0);\n\n  return (\n    <>\n      <Provider foo={count} bar={1}>\n        <ConsumerFoo/>\n        <ConsumerBar/>\n      </Provider>\n      <hr style={{ background: 'transparent' }}/>\n      <button onClick={() => setCount(count + 1)}>Render example</button>\n    </>\n  );\n};\n","import React from 'react';\nimport { createContext, useContextSelector } from 'use-context-selector';\n\nimport RenderCounter from '../components/RenderCounter';\n\ntype ContextValue = { foo: number; bar: number };\n\nconst Context = createContext<ContextValue>({ foo: 0, bar: 0 });\n\nconst Provider: React.FC<{ foo: number; bar: number }> = props => {\n  const { foo, bar } = props;\n\n  return (\n    <RenderCounter color=\"blue\" style={{ width: '70%' }}>\n      <Context.Provider value={{ foo, bar }}>\n        <div>\n          <code>Provider: {JSON.stringify({ foo, bar }, null, 2)}</code>\n        </div>\n        <div>{props.children}</div>\n      </Context.Provider>\n    </RenderCounter>\n  );\n};\n\nconst ConsumerFoo: React.FC = React.memo(() => {\n  const value = useContextSelector(Context, v => v.foo);\n\n  return (\n    <RenderCounter color=\"green\" style={{ width: '70%' }}>\n      <code>ConsumerFoo: {JSON.stringify(value, null, 2)}</code>\n    </RenderCounter>\n  );\n});\n\nconst ConsumerBar: React.FC = React.memo(() => {\n  const value = useContextSelector(Context, v => v.bar);\n\n  return (\n    <RenderCounter color=\"red\" style={{ width: '70%' }}>\n      <code>ConsumerBar: {JSON.stringify(value, null, 2)}</code>\n    </RenderCounter>\n  );\n});\n\nexport default () => {\n  const [count, setCount] = React.useState(0);\n\n  return (\n    <>\n      <Provider foo={count} bar={1}>\n        <ConsumerFoo />\n        <ConsumerBar />\n      </Provider>\n      <hr style={{ background: 'transparent' }} />\n      <button onClick={() => setCount(count + 1)}>Render example</button>\n    </>\n  );\n};\n","import React from 'react';\n\nimport RenderCounter from '../components/RenderCounter';\nimport useForceUpdate from '../hooks/useForceUpdate';\n\ntype ContextValue = { value: number };\nconst Context = React.createContext<ContextValue>({ value: 1 });\n\nconst Provider: React.FC = props => {\n  const value = { value: 1 };\n  return (\n    <RenderCounter color=\"blue\" style={{ width: '70%' }}>\n      <Context.Provider value={value}>\n        <div>\n          <code>Provider: {JSON.stringify(value, null, 2)}</code>\n        </div>\n        <div>{props.children}</div>\n      </Context.Provider>\n    </RenderCounter>\n  );\n};\n\nconst Consumer: React.FC = React.memo(() => {\n  const value = React.useContext(Context);\n\n  return (\n    <RenderCounter color=\"green\" style={{ width: '70%' }}>\n      <code>Consumer: {JSON.stringify(value, null, 2)}</code>\n    </RenderCounter>\n  );\n});\n\nexport default () => {\n  const update = useForceUpdate();\n\n  return (\n    <>\n      <Provider>\n        <Consumer />\n      </Provider>\n      <hr style={{ background: 'transparent' }} />\n      <button onClick={update}>Render example</button>\n    </>\n  );\n};\n","\nimport React from 'react'\nimport { mdx } from '@mdx-js/react'\n\n/* @jsx mdx */\nimport ContextMemoized from '../examples/ContextMemoized';\nimport ContextSeparate from '../examples/ContextSeparate';\nimport ContextSelectorExample from '../examples/ContextSelector';\nimport ContextUnmemoizedExample from '../examples/ContextUnmemoized';\n\nconst makeShortcode = name => function MDXDefaultShortcode(props) {\n  console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\")\n  return <div {...props}/>\n};\n\nconst layoutProps = {\n  \n};\nconst MDXLayout = \"wrapper\"\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n\n    <h2>{`Context`}</h2>\n    <p>{`This page covers only modern React Context API, i.e. `}<a parentName=\"p\" {...{\n        \"href\": \"https://reactjs.org/docs/context.html\"\n      }}><inlineCode parentName=\"a\">{`createContext()`}</inlineCode></a>{`.`}</p>\n    <h3>{`Context behavior`}</h3>\n    <p>{`All consumers that are descendants of a `}<inlineCode parentName=\"p\">{`Provider`}</inlineCode>{` will re-render whenever the `}<inlineCode parentName=\"p\">{`Provider`}</inlineCode>{`‚Äôs `}<inlineCode parentName=\"p\">{`value`}</inlineCode>{` prop changes. The propagation from `}<inlineCode parentName=\"p\">{`Provider`}</inlineCode>{` to its descendant consumers (including `}<inlineCode parentName=\"p\">{`.contextType`}</inlineCode>{` on class components and `}<inlineCode parentName=\"p\">{`useContext()`}</inlineCode>{` hook) is not subject to the `}<inlineCode parentName=\"p\">{`shouldComponentUpdate()`}</inlineCode>{` method or `}<inlineCode parentName=\"p\">{`React.memo()`}</inlineCode>{`, so the consumer is updated even when an ancestor component skips an update.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-jsx\"\n      }}>{`// üí° React.memo will ignored\nconst Example = React.memo(props => {\n  // üí£ Updates will be triggered inside\n  const value = React.useContext(Context);\n\n  return <div />;\n});\n`}</code></pre>\n    <p>{`For example the code below will trigger rerender always as `}<inlineCode parentName=\"p\">{`context`}</inlineCode>{` object will be always newly created.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-jsx\"\n      }}>{`const Example = props => {\n  const { children } = props;\n  // ‚õî ({ value: 1 } === { value: 1 }) is false, so reference is different\n  const context = { value: 1 };\n\n  return <Provider value={context}>{children}</Provider>;\n};\n`}</code></pre>\n    <ContextUnmemoizedExample mdxType=\"ContextUnmemoizedExample\" />\n    <h3>{`Solution 1: Use memoized context value`}</h3>\n    <p>{`If value is changing rarely is good option to memoize an object value with `}<inlineCode parentName=\"p\">{`useMemo()`}</inlineCode>{` hook.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-jsx\"\n      }}>{`const Example = props => {\n  const { children, value } = props;\n  // ‚úÖ Now new \\`context\\` will be recreated only on \\`value\\` change\n  const context = React.useMemo(() => ({ value }), [value]);\n\n  return <Provider value={context}>{children}</Provider>;\n};\n`}</code></pre>\n    <ContextMemoized mdxType=\"ContextMemoized\" />\n    <p>{`For class components you can use `}<inlineCode parentName=\"p\">{`this.state`}</inlineCode>{`:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-jsx\"\n      }}>{`class Example extends React.Component {\n  render() {\n    return <Provider value={this.state}>{children}</Provider>;\n  }\n}\n`}</code></pre>\n    <h3>{`Solution 2: Use separate contexts`}</h3>\n    <p>{`This trick was `}<a parentName=\"p\" {...{\n        \"href\": \"https://kentcdodds.com/blog/how-to-use-react-context-effectively\"\n      }}>{`described`}</a>{` by Kent Dodds. Idea is to pass plain/memoized\nvalues in separate contexts to avoid useless notifications to subscribers.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-jsx\"\n      }}>{`const Example = props => {\n  const { children } = props;\n\n  // ‚ùó both values are plain and safe for shallow compare\n  const firstValue = 1;\n  const secondValue = 2;\n\n  return (\n    <FirstProvider value={firstValue}>\n      <SecondProvider value={secondValue}>{children}</SecondProvider>\n    </FirstProvider>\n  );\n};\n`}</code></pre>\n    <ContextSeparate mdxType=\"ContextSeparate\" />\n    <h3>{`Solution 3: Experimental bits API`}</h3>\n    <p>{`React provides an expiremental API with `}<inlineCode parentName=\"p\">{`calculateChangedBits`}</inlineCode>{` & `}<inlineCode parentName=\"p\">{`calculateChangedBits`}</inlineCode>{`:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-jsx\"\n      }}>{`function createContext<T>(defaultValue: T, calculateChangedBits?: (prev: T, next: T) => number): Context<T>;\nfunction useContext<T>(context: Context<T>, observedBits?: number|boolean): T;\n`}</code></pre>\n    <p>{`Which allows to change default behavior of Context API and avoid useless rerenders. As it's experimental there are no official docs yet, check `}<a parentName=\"p\" {...{\n        \"href\": \"https://medium.com/@leonardobrunolima/react-tips-context-api-performance-considerations-d964f3ad3087\"\n      }}>{`this article`}</a>{` to get more details.`}</p>\n    <p><inlineCode parentName=\"p\">{`changedBits === 0`}</inlineCode>{` has a `}<a parentName=\"p\" {...{\n        \"href\": \"https://github.com/facebook/react/blob/9b0bd43550206e04bfe9ca695e5981eff0e2d03f/packages/react-reconciler/src/ReactFiberBeginWork.js#L2304\"\n      }}>{`special handling`}</a>{` in `}<inlineCode parentName=\"p\">{`react-reconciler`}</inlineCode>{`, so the simplest and interesting trick is to disable any consumer's updates:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-jsx\"\n      }}>{`// ‚ò†Ô∏è Even is \\`value\\` will change updates will be silenced\nconst Context = React.createContext(value, () => 0);\n`}</code></pre>\n    <p>{` `}<a parentName=\"p\" {...{\n        \"href\": \"https://www.npmjs.com/package/use-context-selector\"\n      }}><inlineCode parentName=\"a\">{`use-context-selector`}</inlineCode></a>{` uses `}<inlineCode parentName=\"p\">{`changedBits === 0`}</inlineCode>{` to implement selector-like API for hooks which currently stays as an `}<a parentName=\"p\" {...{\n        \"href\": \"https://github.com/reactjs/rfcs/pull/119\"\n      }}>{`open RFC`}</a>{`.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-jsx\"\n      }}>{`const Example = React.memo(props => {\n  // ‚úÖ Updates of other context properties will be ignored\n  const locale = useContextSelector(LocaleContext, v => v.locale);\n\n  return <div>Current locale is {locale}.</div>;\n});\n`}</code></pre>\n    <ContextSelectorExample mdxType=\"ContextSelectorExample\" />\n    <p>{`There is also a lot of custom context/global state implementations, comparison\nfor Concurrent mode `}<a parentName=\"p\" {...{\n        \"href\": \"https://github.com/dai-shi/will-this-react-global-state-work-in-concurrent-mode\"\n      }}>{`available there`}</a>{`.`}</p>\n    </MDXLayout>;\n}\n\n;\nMDXContent.isMDXComponent = true;","\nimport React from 'react'\nimport { mdx } from '@mdx-js/react'\n\n/* @jsx mdx */\nimport ContextMemoized from '../examples/ContextMemoized';\nimport ContextSeparate from '../examples/ContextSeparate';\nimport ContextSelectorExample from '../examples/ContextSelector';\nimport ContextUnmemoizedExample from '../examples/ContextUnmemoized';\n\nconst makeShortcode = name => function MDXDefaultShortcode(props) {\n  console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\")\n  return <div {...props}/>\n};\n\nconst layoutProps = {\n  \n};\nconst MDXLayout = \"wrapper\"\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n\n    <h2>{`State Immutability in React, why it is important, and how to achieve it using Immer`}</h2>\n    <p>{`React `}<em parentName=\"p\">{`props`}</em>{` and `}<em parentName=\"p\">{`state`}</em>{` are readonly by contract; it is, however, very easy to break this contract\nand introduce issues that are difficult to debug. In order to prevent these issues it is advised not\nto mutate state unless necessary. If non-trivial mutation of the current state is unvoidable, it is\nadvised to use an immutability helper called Immer.`}</p>\n    <p>{`In the text below we start with a piece of code\nthat doesn't work, we transform it into code that works, but is error-prone and unreadable, and eventually\nwe reach the state of well readable and easily maintainable code. As we go over these phases\nwe gradually build a case for using Immer.`}</p>\n    <h3>{`State mutation outside of setState mechanism`}</h3>\n    <p>{`React `}<em parentName=\"p\">{`state`}</em>{` is declared readonly, but that only means that the `}<em parentName=\"p\">{`reference`}</em>{` to it is constant. This\neffectively protects primitives from being changed, but it doesn't protect objects. The only sound\nmeans of state change in React is the `}<em parentName=\"p\">{`setState`}</em>{` method and any code that asserts it is correct in doing so.\nIn the example below, the `}<em parentName=\"p\">{`sumData`}</em>{` function rightfully asserts that the state object will not change\nand based on that it caches its output based on the state object's internal field \"data\".`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-jsx\"\n      }}>{`export const Component: React.FunctionComponent = props => {\n  const [state, setState] = React.useState({ data: [0, 0] });\n\n  // Assert state immutability.\n  const data = state.data;\n  const sumData = React.useCallback(\n    () => data.reduce((acc, val) => acc + val, 0),\n    [data]\n  );\n\n  const run = () => {\n    // State mutated.\n    state.data = [1, 1];\n    // Sum is out of sync.\n    state.data.push(sumData());\n    state.data.push(sumData());\n    state.data.push(sumData());\n    setState({ data: state.data });\n  };\n`}</code></pre>\n    <p>{`However, the `}<em parentName=\"p\">{`run`}</em>{` function changes the state object -- its internal field `}<em parentName=\"p\">{`data`}</em>{` now points to a\ndifferent address. `}<em parentName=\"p\">{`sumData`}</em>{` captures the original address (that wasn't supposed to change), and therefore\nit will sum the original data.`}</p>\n    <p>{`The logical step in rectifying this seems to be to make `}<em parentName=\"p\">{`sumData`}</em>{` capture the entire state -- since it is\nreadonly we will be sure that we always refer to the correct address. It also seemingly makes sense not to construct\na new state object in `}<em parentName=\"p\">{`run`}</em>{` since we only change a single field inside of it:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-jsx\"\n      }}>{`export const Component: React.FunctionComponent = props => {\n  const [state, setState] = React.useState({ data: [0, 0] });\n\n  // Assert state immutability.\n  const sumData = React.useCallback(\n    () => state.data.reduce((acc, val) => acc + val, 0),\n    [state]\n  );\n\n  const run = () => {\n    // State mutated.\n    state.data = [1, 1];\n    // Sum is in sync.\n    state.data.push(sumData());\n    state.data.push(sumData());\n    state.data.push(sumData());\n    setState(state);\n  };\n`}</code></pre>\n    <p>{`The issue with this change is that now it doesn't work at all, because React asserts that since the\naddress of the state object hasn't changed, the object itself hasn't changed, and it will ignore the\nsetState call. The obvious solution is to copy the object:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-jsx\"\n      }}>{`export const Component: React.FunctionComponent = props => {\n  const [state, setState] = React.useState({ data: [0, 0] });\n\n  // Assert state immutability.\n  const sumData = React.useCallback(\n    () => state.data.reduce((acc, val) => acc + val, 0),\n    [state]\n  );\n\n  const run = () => {\n    state.data = [1, 1];\n    // Contract violation.\n    state.data.push(sumData());\n    state.data.push(sumData());\n    state.data.push(sumData());\n    setState({...state});\n  };\n`}</code></pre>\n    <p>{`Now the code will work. The issue with this code, however, is that it is breaking the immutability contract\nwith React and that it is prone to error. If the state object were to consist of multiple nested fields,\nwe would have to make sure that the object is copied properly to form a new state. Since there is no native\nconcept of \"deep copy\" in javascript, doing this can be rather cumbersome:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-jsx\"\n      }}>{`export const Component: React.FunctionComponent = props => {\n  const [state, setState] = React.useState(getCumbersomeState());\n\n  const getStateString = React.useCallback(() => JSON.stringify(state), [\n    state\n  ]);\n\n  const updateJillsStreet = () => {\n    // It is easy to get lost in this sea of spread operators and brackets.\n    setState(prevState => ({\n      people: [\n        { ...prevState.people[0] },\n        {\n          ...prevState.people[1],\n          addresses: [\n            {\n              ...prevState.people[1].addresses[0],\n              street: \\`Street \\${Math.random()}\\`\n            }\n          ]\n        }\n      ]\n    }));\n  };\n\n  return (\n    <div className=\"App\">\n      <div>{getStateString()}</div>\n      <div>\n        <button onClick={updateJillsStreet}>updateJillsStreet</button>\n      </div>\n    </div>\n  );\n};\n`}</code></pre>\n    <h3>{`Immer.js to the rescue`}</h3>\n    <p>{`And that is when Immer.js comes to the rescue. Immer.js uses ES6 proxies (note that when transcompiled to ES5\nit will become much slower) to record changes to a so called `}<em parentName=\"p\">{`draft`}</em>{` object during the execution of the `}<em parentName=\"p\">{`produce`}</em>{`\nfunction and then project them onto a new object that becomes the new state. The `}<em parentName=\"p\">{`draft`}</em>{` object is based on the existing\nstate that is passed to the `}<em parentName=\"p\">{`produce`}</em>{` function along with the draft callback. The following snippet demonstrates\nhow we go from cumbersome, ugly, and ureadable to straightforward, beautiful, and well readable:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-jsx\"\n      }}>{`export const Component: React.FunctionComponent = props => {\n  const [state, setState] = React.useState(getCumbersomeState());\n\n  const getStateString = React.useCallback(() => JSON.stringify(state), [\n    state\n  ]);\n\n  const updateJillsStreet = () => {\n    setState(\n      produce(state, _draft => {\n        _draft.people[1].addresses[0].street = \\`Street \\${Math.random()}\\`;\n      })\n    );\n  };\n\n  return (\n    <div className=\"App\">\n      <div>{getStateString()}</div>\n      <div>\n        <button onClick={updateJillsStreet}>updateJillsStreet</button>\n      </div>\n    </div>\n  );\n};\n`}</code></pre>\n    <p>{`This can be further simplified by using the `}<em parentName=\"p\">{`use-immer`}</em>{` npm package that provides us with a hook\nthat combines the native `}<em parentName=\"p\">{`React.useState`}</em>{` and Immer's `}<em parentName=\"p\">{`produce`}</em>{`:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-jsx\"\n      }}>{`export const Component: React.FunctionComponent = props => {\n  const [state, setState] = useImmer(getCumbersomeState());\n\n  const getStateString = React.useCallback(() => JSON.stringify(state), [\n    state\n  ]);\n\n  const updateJillsStreet = () => {\n    setState(_draft => {\n      _draft.people[1].addresses[0].street = \\`Street \\${Math.random()}\\`;\n    });\n  };\n\n  return (\n    <div className=\"App\">\n      <div>{getStateString()}</div>\n      <div>\n        <button onClick={updateJillsStreet}>updateJillsStreet</button>\n      </div>\n    </div>\n  );\n};\n`}</code></pre>\n    <p>{`In the newly created state, fields that didn't change during the execution of the draft callback\nwill be referentially equal to the fields in the original state. Only fields that were changed\nin the draft and the root object will be new objects.`}</p>\n    <h3>{`Resources`}</h3>\n    <ul>\n      <li parentName=\"ul\"><a parentName=\"li\" {...{\n          \"href\": \"https://immerjs.github.io/immer/docs/introduction\"\n        }}>{`https://immerjs.github.io/immer/docs/introduction`}</a></li>\n    </ul>\n    </MDXLayout>;\n}\n\n;\nMDXContent.isMDXComponent = true;","import React from 'react';\nimport { HashRouter as Router, Switch, Route, Link } from 'react-router-dom';\n\nimport Overview from './pages/Overview.mdx';\nimport Components from './pages/Components.mdx';\nimport ClassComponent from './pages/ClassComponent.mdx';\nimport PureComponent from './pages/PureComponent.mdx';\nimport FunctionComponent from './pages/FunctionComponent.mdx';\nimport Hooks from './pages/Hooks.mdx';\nimport Functions from './pages/Functions.mdx';\nimport Context from './pages/Context.mdx';\nimport Immutability from './pages/Immutability.mdx';\n\nconst App: React.FC = () => {\n  return (\n    <Router>\n      <div className=\"wrapper\">\n        <header>\n          <h1>React Patterns</h1>\n        </header>\n        <div className=\"main\">\n          <aside>\n            <ul>\n              <li>\n                <Link to=\"/\">Overview</Link>\n              </li>\n              <li>\n                <Link to=\"/components\">Components</Link>\n                <ul>\n                  <li>\n                    <Link to=\"/class-component\">Class Component</Link>\n                  </li>\n                  <li>\n                    <Link to=\"/pure-component\">Pure Component</Link>\n                  </li>\n                  <li>\n                    <Link to=\"/function-component\">Function Component</Link>\n                  </li>\n                </ul>\n              </li>\n              <li>\n                <Link to=\"/hooks\">Hooks</Link>\n              </li>\n              <li>\n                <Link to=\"/context\">Context</Link>\n              </li>\n              <li>\n                <Link to=\"/functions\">Functions</Link>\n              </li>\n              <li>\n                <Link to=\"/immutability\">Immutability</Link>\n              </li>\n            </ul>\n          </aside>\n          <main>\n            <React.Suspense fallback={<div>Loading...</div>}>\n              <Switch>\n                <Route path=\"/components\" component={Components} />\n                <Route path=\"/class-component\" component={ClassComponent} />\n                <Route path=\"/pure-component\" component={PureComponent} />\n                <Route\n                  path=\"/function-component\"\n                  component={FunctionComponent}\n                />\n                <Route path=\"/hooks\" component={Hooks} />\n                <Route path=\"/context\" component={Context} />\n                <Route path=\"/functions\" component={Functions} />\n                <Route path=\"/immutability\" component={Immutability} />\n                <Route exact path=\"/\" component={Overview} />\n              </Switch>\n            </React.Suspense>\n          </main>\n        </div>\n        <footer>\n          &copy; 2019, Sergii Mykhailov. <Link to=\"/\">React Patterns</Link>\n        </footer>\n      </div>\n    </Router>\n  );\n};\n\nexport default App;\n","import Code from './Code';\n\nexport default {\n  code: Code\n};\n","import Highlight, { defaultProps, Language } from 'prism-react-renderer';\nimport React from 'react';\n\nimport 'prism-themes/themes/prism-vs.css';\n\n// TODO: use typings when MDX2 will be released\ntype CodeProps = {\n  className?: string;\n  children?: string;\n};\n\nconst Code: React.FC<CodeProps> = props => {\n  const { className = 'language-jsx', children = '' } = props;\n  const language: Language = className.replace('language-', '') as any;\n  const code = children.replace(/\\n$/, '');\n\n  return (\n    <>\n      {/* CSS fix for empty lines */}\n      <style>{`.prism-code .token.plain { display: inline-block; }`}</style>\n      <style>{`.prism-code .token.comment { font-style: normal; }`}</style>\n\n      <Highlight\n        {...defaultProps}\n        code={code}\n        language={language}\n        theme={undefined} // CSS theme is used\n      >\n        {({ className, style, tokens, getLineProps, getTokenProps }) => (\n          <pre className={className} style={{ ...style, padding: 3 }}>\n            {tokens.map((line, i) => (\n              <div {...getLineProps({ line, key: i })}>\n                {line.map((token, key) => (\n                  <span {...getTokenProps({ token, key })} />\n                ))}\n              </div>\n            ))}\n          </pre>\n        )}\n      </Highlight>\n    </>\n  );\n};\n\nexport default Code;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      (process as { env: { [key: string]: string } }).env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","// @ts-ignore\nimport { MDXProvider } from '@mdx-js/react';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport Typography from 'typography';\n// @ts-ignore\nimport githubTheme from 'typography-theme-github';\n\nimport App from './app';\nimport components from './components/mdx';\nimport * as serviceWorker from './serviceWorker';\nimport './index.css';\n\nconst typography = new Typography(githubTheme);\ntypography.injectStyles();\n\nReactDOM.render(\n  <MDXProvider components={components}>\n    <App />\n  </MDXProvider>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}